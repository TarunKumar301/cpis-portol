



<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simple Steno Typist</title>
    <style>
        body { font-family: sans-serif; background: #f4f4f9; display: flex; flex-direction: column; align-items: center; padding: 20px; }
        .container { background: white; padding: 20px; border-radius: 10px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); width: 90%; max-width: 800px; }
        #timerDisplay { font-size: 40px; font-weight: bold; color: #d32f2f; margin-bottom: 15px; text-align: center; }
        .controls { display: flex; gap: 10px; margin-bottom: 15px; justify-content: center; align-items: center; }
        input[type="number"] { width: 60px; padding: 8px; border: 1px solid #ccc; border-radius: 4px; }
        textarea { width: 100%; height: 400px; padding: 15px; font-size: 18px; line-height: 1.6; border: 2px solid #ddd; border-radius: 8px; resize: none; box-sizing: border-box; }
        .btn { padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer; font-weight: bold; text-transform: uppercase; }
        .btn-start { background: #2563eb; color: white; }
        .btn-stop { background: #dc2626; color: white; display: none; }
    </style>
</head>
<body>

    <div class="container">
        <div id="timerDisplay">00:00</div>

        <div class="controls">
            <label>Minutes:</label>
            <input type="number" id="minInput" value="10" min="1">
            <button id="startBtn" class="btn btn-start" onclick="startTest()">Start Test</button>
            <button id="stopBtn" class="btn btn-stop" onclick="finishTest()">Submit & Download</button>
        </div>

        <textarea id="typeArea" placeholder="Start button par click karein aur type karna shuru karein..." disabled></textarea>
    </div>

    <script>
        let timer;
        let timeLeft;
        const timerDisplay = document.getElementById('timerDisplay');
        const typeArea = document.getElementById('typeArea');
        const startBtn = document.getElementById('startBtn');
        const stopBtn = document.getElementById('stopBtn');
        const minInput = document.getElementById('minInput');

        function startTest() {
            const mins = parseInt(minInput.value);
            if (isNaN(mins) || mins <= 0) return alert("Sahi time daalein!");

            timeLeft = mins * 60;
            typeArea.disabled = false;
            typeArea.value = "";
            typeArea.focus();

            startBtn.style.display = "none";
            stopBtn.style.display = "inline-block";
            minInput.disabled = true;

            timer = setInterval(() => {
                timeLeft--;
                updateDisplay();

                if (timeLeft <= 0) {
                    finishTest();
                }
            }, 1000);
        }

        function updateDisplay() {
            let m = Math.floor(timeLeft / 60);
            let s = timeLeft % 60;
            timerDisplay.innerText = `${m.toString().padStart(2, '0')}:${s.toString().padStart(2, '0')}`;
        }

        function finishTest() {
            clearInterval(timer);
            typeArea.disabled = true;
            
            // Download logic
            const text = typeArea.value;
            if(text.trim() === "") {
                alert("Kucch type nahi kiya gaya!");
            } else {
                downloadTextFile(text);
            }

            // Reset UI
            startBtn.style.display = "inline-block";
            stopBtn.style.display = "none";
            minInput.disabled = false;
            timerDisplay.innerText = "DONE";
        }

        function downloadTextFile(content) {
            const blob = new Blob([content], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            const timestamp = new Date().toLocaleTimeString();
            
            a.href = url;
            a.download = `Typing_Matter_${timestamp.replace(/:/g, '-')}.txt`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
        }
    </script>
</body>
</html>
